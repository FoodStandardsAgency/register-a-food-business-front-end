{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "../components/PostForm.njk" import postForm %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "../components/ProcessedErrorSummary.njk" import processedErrorSummary %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% extends "layout.njk" %}
{% block content %}
    {{ props.currentPageWithQuery }}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            {% call govukFieldset({
          legend: {
            text: "What is the local authority where the establishment's address is located?",
            classes: "govuk-fieldset__legend--l",
            isPageHeading: true
                  }
            }) %}
            {% endcall %}
            {% call postForm(props.formAction, props.csrfToken, props.language) -%}
            {{ processedErrorSummary(props.validatorErrors, props.language) }}
            {% set localAuthoritiesArray = [
                {
                    text: ""
                }
            ] %}
            {% for localAuthority in props.localAuthorities %}
                {% set localAuthoritiesArray = (localAuthoritiesArray.push({
                    value: [
                        localAuthority._id, localAuthority.local_council
                    ],
                    selected: props.localAuthorityID == localAuthority._id,
                    text: localAuthority.local_council
                }), localAuthoritiesArray) %}
            {% endfor %}
            {{ govukSelect({
                id: "local_authority",
                name: "local_authority",
                label: {
                    text: "Choose local authority"
                },
                    hint: {
                    text: "This is some hint"
                },
                items: localAuthoritiesArray
                }) }}
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full">
                    {{ govukButton({
              text: __("Save and continue", props.language) if props.editModeFirstPage else __("Continue", props.language)
          }) }}
                </div>
            </div>
            {%- endcall %}
        </div>
    </div>
{% endblock %}